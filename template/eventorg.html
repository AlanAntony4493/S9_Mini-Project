{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>SMYM Mukkoottuthara</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    <link href="{% static 'img/logo1.png' %}" rel="icon">
    <link href="{% static 'img/logo1.png' %}" rel="apple-touch-icon">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
    <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/remixicon/remixicon.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <style>
        /* Add custom styles here */
        /* Style for the form */
        .event-form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-left: 20px;
            /* Add margin to the left of the form */
        }

        .event-form label {
            font-weight: bold;
        }

        .event-form input[type="text"],
        .event-form input[type="date"],
        .event-form input[type="time"],
        .event-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .event-form input[type="submit"] {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }

        .event-form input[type="submit"]:hover {
            background-color: #0056b3;
        }

        /* Style for events section */
        .event-container {
            display: flex;
            flex-wrap: wrap;
            margin-top: 0;
        }

        .event {
            background-color: #fff;
            border: 1px solid #ddd;
            margin: 10px;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            flex-basis: calc(50% - 20px);
            /* Set the initial flex basis to 50% for bigger devices */
            /* Add media query for smaller devices (phones) */
        }

        @media (max-width: 768px) {
            .event {
                flex-basis: calc(100% - 20px);
                /* Set to 100% for smaller devices, one event in a row */
            }
        }

        .event-date {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ffec40, #ffffff, #ff5733);
            /* Yellow, White, Red gradient */
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            /* Change border-radius to 5px for a box shape */
            width: 70px;
            height: 70px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
        }

        .event-date:hover {
            transform: scale(1.1);
            /* Add a subtle hover effect */
        }

        .event-date .day {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
            color: #000;
            /* Text color for the day */
        }

        .event-date .month {
            font-size: 12px;
            margin: 0;
            color: #000;
            /* Text color for the month */
        }

        .event-description {
            margin-top: 5px;
        }

        /* Custom styles for the "View Detailed Poster" button */
        .view-image-btn {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            float: right;
        }

        .view-image-btn:hover {
            background-color: #0056b3;
        }

        /* Style for modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Transparent background overlay */
            overflow: auto;
        }

        /* Updated selector for modal content */
        .modal-content {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            max-width: 90%;
            max-height: 90%;
            overflow: auto;
            text-align: center;
        }

        .modal-content img {
            max-width: 100%;
            max-height: 100%;
            margin-right:20px;
        }

        .modal-close-button {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 25px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top header-inner-pages">
        <div class="container d-flex align-items-center justify-content-lg-between">
            <a href="{% url 'index' %}" class="logo me-auto me-lg-0"><img src="{% static 'img/logonew.png' %}" alt="SMYM" class="img-fluid" style="height:100px"></a>
            <nav id="navbar" class="navbar order-last order-lg-0">
                <ul>
                    <li><a class="nav-link scrollto active" href="{% url 'index' %}">Home</a></li>
                    <li class="dropdown"><a href="#"><span>About Us</span> <i class="bi bi-chevron-down"></i></a>
                        <ul>
                            <li><a href="{% url 'index' %}#about">SMYM Mukkoottuthara</a></li>
                            <li class="dropdown"><a href="{% url 'by_law' %}"><span>SMYM</span> <i class="bi bi-chevron-right"></i></a>
                        </ul>
                    </li>
                    <li><a class="nav-link scrollto" href="{% url 'index' %}#services">Services</a></li>
                    <li><a class="nav-link scrollto " href="gallery.html">Gallery</a></li>
                    <li><a class="nav-link scrollto" href="{% url 'index' %}#contact">Contact</a></li>
                    <li><a class="nav-link scrollto" href="{% url 'login' %}">Log In</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav>
            <a href="#about" class="get-started-btn scrollto">Support Us</a>
        </div>
    </header>
    <!-- End Header -->

    <main id="main">
        <!-- ======= Breadcrumbs ======= -->
        <section class="breadcrumbs">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>Upcoming Events</h2>
                </div>
            </div>
        </section>
        <!-- End Breadcrumbs -->
        <!-- Events Section -->
        <section class="inner-page">
            <div class="container">
                <div class="event-container">
                    <!-- Event with "View Detailed Poster" button -->
                    <div class="event">
                        <div class="image-container">
                            <img src="{% static 'img/about_2.jpg' %}" alt="Event Poster" style="max-height: 200px; width: 100%;">
                        </div>
                        <!-- Event Date and Description-->
                        <div class="event-date">
                            <div class="day">20</div>
                            <div class="month">Aug</div>
                        </div>
                        <div class="event-description">
                            <p class="event-title"><b>Medical Camp</b>: "Medical camp in collaboration with MMT Hospital Mundakkayam"</p>
                            <p class="event-time">9:45 AM - 12:30 AM</p>
                            <p class="event-venue">Main Auditorium</p>
                            <button class="view-image-btn" onclick="openModal('{% static 'img/about_2.jpg' %}')">View Detailed Poster</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Events Section -->


        {% comment %} form {% endcomment %}
        <div class="container">
          <div class="row">
              <div class="col-md-6">
                  <h2>Add New Event</h2>
                  <div class="event-form">
                      <form action="#" method="post">
                          <label for="date">Date:</label>
                           <input type="date" id="date" name="date" required min="{% now 'Y-m-d' %}">
                          <label for="title">Title:</label>
                          <input type="text" id="title" name="title" required>
            
                          <label for="description">Description:</label>
                          <textarea id="description" name="description" rows="4" required></textarea>
            
                          <label for="start-time">Starting Time:</label>
                          <input type="time" id="start-time" name="start-time" required>
            
                          <label for="end-time">Ending Time:</label>
                          <input type="time" id="end-time" name="end-time" required>

                          <label for="end-date">Ending Date:</label>
                          <input type="date" id="end-date" name="end-date" required min="{{ tomorrow|date:'Y-m-d' }}">                          <label for="venue">Venue:</label>
                          <input type="text" id="venue" name="venue" required>
            
                          <label for="cover-poster">Poster for Cover:</label>
                          <input type="file" id="cover-poster" name="cover-poster" accept="image/*">
                          <br><br>
                          <label for="detailed-poster">Detailed Poster:  </label>
                          <input type="file" id="detailed-poster" name="detailed-poster" accept="image/*" required>
            
                          <input type="submit" value="Submit">
                      </form>
                  </div>
              </div>
          </div>
      </div>      
      
    </main>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">

                    <div class="col-lg-3 col-md-6">
                        <div class="footer-info">
                            <h3><img src="{% static 'img/logo1.png' %}" style="height:90px; width:80px;"></h3>
                            <p>
                                St Thomas Church <br>
                                Mukkoottuthara,<br>
                                PIN: 686510<br><br>
                                <strong>Phone:</strong> +91 8078529691<br>
                                <strong>Email:</strong> smymmukkoottuthara@gmail.com<br>
                            </p>
                            <div class="social-links mt-3">
                                <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                                <a href="https://www.facebook.com/SMYM.Mukkoottuthara" class="facebook"><i class="bx bxl-facebook"></i></a>
                                <a href="https://www.instagram.com/smymmukkoottuthara/" class="instagram"><i class="bx bxl-instagram"></i></a>
                                <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                                <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-2 col-md-6 footer-links">
                        <h4>Useful Links</h4>
                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="{% url 'index' %}">Home</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="{% url 'index' %}#about">About us</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="{% url 'index' %}#services">Services</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-3 col-md-6 footer-links">
                        <h4>Our Services</h4>
                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#services">Parish Directory</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="assets/blood bank.pdf">Blood Bank</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="event.php">Upcoming Events</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Help</a></li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>

    </footer>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="modal-close-button" onclick="closeModal()">&times;</span>
            <img id="modal-image" src="" alt="Event Poster">
        </div>
    </div>

    <!-- JavaScript for Modal (include this script in your HTML) -->
    <script>
        // Get the modal element
        var modal = document.getElementById("myModal");
        var modalContent = document.querySelector(".modal-content");

        // Function to open the modal with the specified image URL
        function openModal(imageUrl) {
            var modalImg = document.getElementById("modal-image");
            modal.style.display = "block";
            modalContent.style.marginTop = "0"; // Reset margin-top
            modalImg.src = imageUrl;
            modalImg.onload = function () {
                // Set the modal's width and height to 50% of the screen
                var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
                var screenHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                modalContent.style.maxWidth = screenWidth * 0.5 + "px";
                modalContent.style.maxHeight = screenHeight * 0.5 + "px";
            };
        }

        // Function to close the modal
        function closeModal() {
            modal.style.display = "none";
        }

        // Add an event listener to the modal overlay (click outside to close)
        modal.addEventListener("click", function (event) {
            if (event.target === modal) {
                closeModal();
            }
        });

        // Listen for the browser's back button click event
        window.addEventListener("popstate", function (event) {
            closeModal();
        });
    </script>

    {% comment %} Event form {% endcomment %}

    <script>
      // JavaScript to enforce additional constraints
  
      // Function to validate the time inputs
      function validateTimeInputs() {
          const startTime = document.getElementById('start-time').value;
          const endTime = document.getElementById('end-time').value;
          const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  
          if (startTime >= endTime || startTime <= currentTime || endTime <= currentTime) {
              alert('Invalid time selection. Start and end times should be in 12-hour format, and end time should be after start time and after the current time.');
              return false;
          }
          return true;
      }
  
      // Attach the form submission event handler
      document.querySelector('form').addEventListener('submit', function (e) {
          if (!validateTimeInputs()) {
              e.preventDefault(); // Prevent form submission if validation fails
          }
      });
  </script>
</body>

</html>
